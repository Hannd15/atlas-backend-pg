{
    "openapi": "3.0.0",
    "info": {
        "title": "Atlas Backend API",
        "description": "API documentation for Atlas Backend - Project Management System",
        "contact": {
            "email": "support@example.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/api",
            "description": "API Server"
        }
    ],
    "paths": {
        "/api/pg/academic-periods": {
            "get": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Get all academic periods",
                "operationId": "f0d7c0cc8f0c91e548e25d41d815d55d",
                "responses": {
                    "200": {
                        "description": "List of academic periods with nested phases and deliverables",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 3
                                            },
                                            "name": {
                                                "type": "string",
                                                "example": "2025-1"
                                            },
                                            "start_date": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "2025-01-15"
                                            },
                                            "end_date": {
                                                "type": "string",
                                                "format": "date",
                                                "example": "2025-06-30"
                                            },
                                            "state": {
                                                "properties": {
                                                    "id": {
                                                        "type": "integer",
                                                        "example": 1
                                                    },
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Active"
                                                    },
                                                    "description": {
                                                        "type": "string",
                                                        "example": "Academic period is currently running."
                                                    }
                                                },
                                                "type": "object",
                                                "nullable": true
                                            },
                                            "phases": {
                                                "properties": {
                                                    "phase_one": {
                                                        "$ref": "#/components/schemas/AcademicPeriodPhaseResource"
                                                    },
                                                    "phase_two": {
                                                        "$ref": "#/components/schemas/AcademicPeriodPhaseResource"
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Create a new academic period",
                "operationId": "0473bc1f48a8c7e2dba06a19c4a46ca1",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "start_date",
                                    "end_date"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "2025-1"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-01-15"
                                    },
                                    "end_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-06-30"
                                    },
                                    "state_id": {
                                        "type": "integer",
                                        "example": 1,
                                        "nullable": true
                                    },
                                    "phases": {
                                        "properties": {
                                            "phase_one": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Proyecto de grado I"
                                                    },
                                                    "deliverables": {
                                                        "type": "array",
                                                        "items": {
                                                            "$ref": "#/components/schemas/AcademicPeriodDeliverableInput"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "phase_two": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Proyecto de grado II"
                                                    },
                                                    "deliverables": {
                                                        "type": "array",
                                                        "items": {
                                                            "$ref": "#/components/schemas/AcademicPeriodDeliverableInput"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Academic period created successfully with automatic phases",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 3
                                        },
                                        "name": {
                                            "type": "string",
                                            "example": "2025-1"
                                        },
                                        "start_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2025-01-15"
                                        },
                                        "end_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2025-06-30"
                                        },
                                        "state": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Draft"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "example": "Academic period is being prepared."
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "phases": {
                                            "properties": {
                                                "phase_one": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 10
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Proyecto de grado I"
                                                        },
                                                        "start_date": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2025-01-15"
                                                        },
                                                        "end_date": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2025-06-30"
                                                        },
                                                        "deliverables": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 25
                                                                    },
                                                                    "name": {
                                                                        "type": "string",
                                                                        "example": "Entrega 1"
                                                                    },
                                                                    "description": {
                                                                        "type": "string",
                                                                        "example": "Documento PDF con la propuesta"
                                                                    },
                                                                    "due_date": {
                                                                        "type": "string",
                                                                        "format": "date-time",
                                                                        "example": "2025-02-15T23:59:00"
                                                                    },
                                                                    "files": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "properties": {
                                                                                "id": {
                                                                                    "type": "integer",
                                                                                    "example": 90
                                                                                },
                                                                                "name": {
                                                                                    "type": "string",
                                                                                    "example": "propuesta.pdf"
                                                                                },
                                                                                "extension": {
                                                                                    "type": "string",
                                                                                    "example": "pdf"
                                                                                },
                                                                                "url": {
                                                                                    "type": "string",
                                                                                    "example": "https://storage.test/pg/uploads/2025/propuesta.pdf"
                                                                                }
                                                                            },
                                                                            "type": "object"
                                                                        }
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                },
                                                "phase_two": {
                                                    "properties": {
                                                        "id": {
                                                            "type": "integer",
                                                            "example": 11
                                                        },
                                                        "name": {
                                                            "type": "string",
                                                            "example": "Proyecto de grado II"
                                                        },
                                                        "start_date": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2025-01-15"
                                                        },
                                                        "end_date": {
                                                            "type": "string",
                                                            "format": "date",
                                                            "example": "2025-06-30"
                                                        },
                                                        "deliverables": {
                                                            "type": "array",
                                                            "items": {
                                                                "properties": {
                                                                    "id": {
                                                                        "type": "integer",
                                                                        "example": 36
                                                                    },
                                                                    "name": {
                                                                        "type": "string",
                                                                        "example": "Entrega final"
                                                                    },
                                                                    "description": {
                                                                        "type": "string",
                                                                        "example": "Repositorio con c√≥digo fuente"
                                                                    },
                                                                    "due_date": {
                                                                        "type": "string",
                                                                        "format": "date-time",
                                                                        "example": "2025-06-20T23:59:00"
                                                                    },
                                                                    "files": {
                                                                        "type": "array",
                                                                        "items": {
                                                                            "properties": {
                                                                                "id": {
                                                                                    "type": "integer",
                                                                                    "example": 94
                                                                                },
                                                                                "name": {
                                                                                    "type": "string",
                                                                                    "example": "presentacion.pptx"
                                                                                },
                                                                                "extension": {
                                                                                    "type": "string",
                                                                                    "example": "pptx"
                                                                                },
                                                                                "url": {
                                                                                    "type": "string",
                                                                                    "example": "https://storage.test/pg/uploads/2025/presentacion.pptx"
                                                                                }
                                                                            },
                                                                            "type": "object"
                                                                        }
                                                                    }
                                                                },
                                                                "type": "object"
                                                            }
                                                        }
                                                    },
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/academic-periods/{id}": {
            "get": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Get a specific academic period",
                "operationId": "90d091cef8f748cf35467b88c5bce541",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Academic period details with phases and deliverables",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer",
                                            "example": 3
                                        },
                                        "name": {
                                            "type": "string",
                                            "example": "2025-1"
                                        },
                                        "start_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2025-01-15"
                                        },
                                        "end_date": {
                                            "type": "string",
                                            "format": "date",
                                            "example": "2025-06-30"
                                        },
                                        "state": {
                                            "properties": {
                                                "id": {
                                                    "type": "integer",
                                                    "example": 1
                                                },
                                                "name": {
                                                    "type": "string",
                                                    "example": "Active"
                                                },
                                                "description": {
                                                    "type": "string",
                                                    "example": "Academic period is currently running."
                                                }
                                            },
                                            "type": "object",
                                            "nullable": true
                                        },
                                        "phases": {
                                            "description": "Always returns two phases aligned with the academic period dates",
                                            "properties": {
                                                "phase_one": {
                                                    "$ref": "#/components/schemas/AcademicPeriodPhaseResource"
                                                },
                                                "phase_two": {
                                                    "$ref": "#/components/schemas/AcademicPeriodPhaseResource"
                                                }
                                            },
                                            "type": "object"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Academic period not found"
                    }
                }
            },
            "put": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Update an academic period",
                "operationId": "e096c1c3d099f5a8477c9c8618d6df65",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "2025-1"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-01-15"
                                    },
                                    "end_date": {
                                        "type": "string",
                                        "format": "date",
                                        "example": "2025-06-30"
                                    },
                                    "state_id": {
                                        "type": "integer",
                                        "example": 2,
                                        "nullable": true
                                    },
                                    "phases": {
                                        "description": "Provide partial data to rename phases or replace deliverables. Omitted phases remain unchanged.",
                                        "properties": {
                                            "phase_one": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Proyecto de grado I"
                                                    },
                                                    "deliverables": {
                                                        "description": "Complete replacement list for phase deliverables. Files can be sent via multipart uploads.",
                                                        "type": "array",
                                                        "items": {
                                                            "$ref": "#/components/schemas/AcademicPeriodDeliverableInput"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            },
                                            "phase_two": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string",
                                                        "example": "Proyecto de grado II"
                                                    },
                                                    "deliverables": {
                                                        "type": "array",
                                                        "items": {
                                                            "$ref": "#/components/schemas/AcademicPeriodDeliverableInput"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Academic period updated successfully"
                    },
                    "404": {
                        "description": "Academic period not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Delete an academic period",
                "operationId": "da734672bab8964ba9c5915f8fb9b46b",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Academic period deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Academic period deleted successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Academic period not found"
                    }
                }
            }
        },
        "/api/pg/academic-periods/dropdown": {
            "get": {
                "tags": [
                    "Academic Periods"
                ],
                "summary": "Get academic periods for dropdown",
                "operationId": "5fa378d21ced40786c74e01f16e74857",
                "responses": {
                    "200": {
                        "description": "List of academic periods formatted for dropdowns",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "value": {
                                                "type": "integer"
                                            },
                                            "label": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pg/deliverables": {
            "get": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Get all deliverables",
                "operationId": "7ae26f21055ed76fad4e7bb42aaca919",
                "responses": {
                    "200": {
                        "description": "List of deliverables with phase and file relationships",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/DeliverableResource"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Create deliverable(s)",
                "operationId": "5c940f036f85439fbcca31a5d91157f5",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "oneOf": [
                                    {
                                        "$ref": "#/components/schemas/DeliverableCreatePayload"
                                    },
                                    {
                                        "type": "array",
                                        "items": {
                                            "$ref": "#/components/schemas/DeliverableCreatePayload"
                                        }
                                    },
                                    {
                                        "$ref": "#/components/schemas/DeliverableBatchPayload"
                                    }
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Deliverable(s) created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "$ref": "#/components/schemas/DeliverableResource"
                                        },
                                        {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/DeliverableResource"
                                            }
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/deliverables/{id}": {
            "get": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Get a specific deliverable",
                "operationId": "e72c8bdf3e1a4d751f4beba2924c6c8c",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deliverable details with phase and file metadata",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliverableResource"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Update a deliverable",
                "operationId": "4538913078ae021375594e7b5970406e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "phase_id": {
                                        "type": "integer",
                                        "nullable": true
                                    },
                                    "name": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "description": {
                                        "type": "string",
                                        "nullable": true
                                    },
                                    "due_date": {
                                        "type": "string",
                                        "format": "date-time",
                                        "nullable": true
                                    },
                                    "file_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "files": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Deliverable updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliverableResource"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Delete a deliverable",
                "operationId": "3a2d130b458970794b3cd681f260edbc",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deliverable deleted successfully"
                    }
                }
            }
        },
        "/api/pg/deliverables/dropdown": {
            "get": {
                "tags": [
                    "Deliverables"
                ],
                "summary": "Get deliverables for dropdown",
                "operationId": "8bde9c6f60854a0c9a126491660ce14a",
                "responses": {
                    "200": {
                        "description": "List of deliverables formatted for dropdowns"
                    }
                }
            }
        },
        "/api/pg/deliverable-files": {
            "get": {
                "tags": [
                    "Deliverable Files"
                ],
                "summary": "Get all deliverable-file associations",
                "operationId": "a98bc04dabe0e82011214630bc603f37",
                "responses": {
                    "200": {
                        "description": "List of deliverable-file associations with related names",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/DeliverableFileResource"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Deliverable Files"
                ],
                "summary": "Create a new deliverable-file association",
                "operationId": "72d938293fa0e691f76105770add76b4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "deliverable_id",
                                    "file_id"
                                ],
                                "properties": {
                                    "deliverable_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "file_id": {
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Deliverable-file association created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliverableFileResource"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/deliverable-files/{deliverable_id}/{file_id}": {
            "get": {
                "tags": [
                    "Deliverable Files"
                ],
                "summary": "Get a specific deliverable-file association",
                "operationId": "337b83fc2d455a195056879d6d1d1072",
                "parameters": [
                    {
                        "name": "deliverable_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "file_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deliverable-file association details with related names",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DeliverableFileResource"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Deliverable Files"
                ],
                "summary": "Delete a deliverable-file association",
                "operationId": "e2885067cfda0c474fe95604da859f6f",
                "parameters": [
                    {
                        "name": "deliverable_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "file_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Deliverable-file association deleted successfully"
                    }
                }
            }
        },
        "/api/pg/files": {
            "get": {
                "tags": [
                    "Files"
                ],
                "summary": "Get all files",
                "operationId": "224cc93ba558bac42ca6feb764cf1516",
                "responses": {
                    "200": {
                        "description": "List of stored files with related deliverables and repository entities",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/StoredFileResource"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Files"
                ],
                "summary": "Create a new file",
                "operationId": "19ef7dd81d5b1bd0f2882c838cfb5138",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "files"
                                ],
                                "properties": {
                                    "files": {
                                        "type": "array",
                                        "items": {
                                            "type": "string",
                                            "format": "binary"
                                        },
                                        "minItems": 1
                                    },
                                    "deliverable_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 27
                                        }
                                    },
                                    "submission_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 12
                                        }
                                    },
                                    "repository_project_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 4
                                        }
                                    },
                                    "repository_proposal_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer",
                                            "example": 8
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "File created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/StoredFileResource"
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/files/{id}": {
            "get": {
                "tags": [
                    "Files"
                ],
                "summary": "Get a specific file",
                "operationId": "77b9f4032f10aeea13ec648db201921d",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "File details with related deliverables and repository entities",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/StoredFileResource"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "Files"
                ],
                "summary": "Update a file",
                "operationId": "6d0b1b3a3ae4865966663c585964f127",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "extension": {
                                        "type": "string"
                                    },
                                    "url": {
                                        "type": "string"
                                    },
                                    "deliverable_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "submission_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "repository_project_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    },
                                    "repository_proposal_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "File updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/StoredFileResource"
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Files"
                ],
                "summary": "Delete a file",
                "operationId": "90c924485b81c1024df6c78a0de0d830",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "File deleted successfully"
                    }
                }
            }
        },
        "/api/pg/files/dropdown": {
            "get": {
                "tags": [
                    "Files"
                ],
                "summary": "Get files for dropdown",
                "operationId": "0b48ddf4cf380fd0cd8254477b9a4c5c",
                "responses": {
                    "200": {
                        "description": "List of files formatted for dropdowns"
                    }
                }
            }
        },
        "/api/pg/phases": {
            "get": {
                "tags": [
                    "Phases"
                ],
                "summary": "Get all phases",
                "operationId": "b25436f36fed519cb23ebc9e2e9fe4d8",
                "responses": {
                    "200": {
                        "description": "List of phases with period and deliverable names"
                    }
                }
            }
        },
        "/api/pg/phases/{id}": {
            "get": {
                "tags": [
                    "Phases"
                ],
                "summary": "Get a specific phase",
                "operationId": "13e921a3841e0e3189fabb65a71c2f46",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Phase details with relation IDs"
                    }
                }
            },
            "put": {
                "tags": [
                    "Phases"
                ],
                "summary": "Update a phase",
                "operationId": "f4a65f250c51c588d34e357f76c4c155",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "start_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "end_date": {
                                        "type": "string",
                                        "format": "date"
                                    },
                                    "period_id": {
                                        "type": "integer"
                                    },
                                    "deliverable_ids": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Phase updated successfully"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Phases"
                ],
                "summary": "Delete a phase",
                "operationId": "171ea40de8aa01391a64015a7200abc0",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Phase deleted successfully"
                    }
                }
            }
        },
        "/api/pg/phases/dropdown": {
            "get": {
                "tags": [
                    "Phases"
                ],
                "summary": "Get phases for dropdown",
                "operationId": "755caaf39b8cf85852e62911d12b3e41",
                "responses": {
                    "200": {
                        "description": "List of phases formatted for dropdowns"
                    }
                }
            }
        },
        "/api/pg/project-positions": {
            "get": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Get all project positions",
                "operationId": "2d0ed7253bad6ff4012d970360ce8f37",
                "responses": {
                    "200": {
                        "description": "List of project positions with eligible user names and staff names"
                    }
                }
            },
            "post": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Create a new project position",
                "operationId": "074936bd9a269205705dbc6046a07195",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string",
                                        "example": "Jurado"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Project position created successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/project-positions/{id}": {
            "get": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Get a specific project position",
                "operationId": "d8855bf0ef646af437f52cef5a4a748e",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Project position details with relation IDs"
                    }
                }
            },
            "put": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Update a project position",
                "operationId": "f88394ead9cd45382f7dff92bbf39112",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Project position updated successfully"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Delete a project position",
                "operationId": "0a707a210bb2239b014a37312c9ef0a5",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Project position deleted successfully"
                    }
                }
            }
        },
        "/api/pg/project-positions/dropdown": {
            "get": {
                "tags": [
                    "Project Positions"
                ],
                "summary": "Get project positions for dropdown",
                "operationId": "6cc71525c2327391f8b354b952fb5e0e",
                "responses": {
                    "200": {
                        "description": "List of project positions formatted for dropdowns"
                    }
                }
            }
        },
        "/api/pg/users": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get all users",
                "operationId": "6b7feb892674bdbd2489e028fd56dd49",
                "responses": {
                    "200": {
                        "description": "List of users with comma-separated project position eligibility names",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "email": {
                                                "type": "string",
                                                "format": "email"
                                            },
                                            "project_position_eligibility_names": {
                                                "description": "Comma-separated position names",
                                                "type": "string"
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/pg/users/{id}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get a specific user",
                "operationId": "82365ad68a62a0adf93fdfbd70c989f8",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User details with array of project position eligibility IDs",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string",
                                            "format": "email"
                                        },
                                        "project_position_eligibility_ids": {
                                            "type": "array",
                                            "items": {
                                                "type": "integer"
                                            }
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update a user",
                "operationId": "2fe1714e472adabc9dc037858e132349",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "email": {
                                        "type": "string",
                                        "format": "email"
                                    },
                                    "project_position_eligibility_ids": {
                                        "description": "Array of project position IDs. Empty array removes all eligibilities. Null or missing field is ignored.",
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User updated successfully"
                    },
                    "404": {
                        "description": "User not found"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/users/dropdown": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get users for dropdown",
                "operationId": "81dfd57b411a5700af5e4b9a6a132a82",
                "responses": {
                    "200": {
                        "description": "List of users formatted for dropdowns"
                    }
                }
            }
        },
        "/api/pg/user-project-eligibilities": {
            "get": {
                "tags": [
                    "User Project Eligibilities"
                ],
                "summary": "Get all user project eligibilities",
                "operationId": "79ecbb8c0a6a19dfb9f8f351d8387b99",
                "responses": {
                    "200": {
                        "description": "List of user project eligibilities with user and position names"
                    }
                }
            },
            "post": {
                "tags": [
                    "User Project Eligibilities"
                ],
                "summary": "Create a new user project eligibility",
                "operationId": "38ac9652bc15fc7630b3724f8b4d812e",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "user_id",
                                    "project_position_id"
                                ],
                                "properties": {
                                    "user_id": {
                                        "type": "integer",
                                        "example": 1
                                    },
                                    "project_position_id": {
                                        "type": "integer",
                                        "example": 1
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "User project eligibility created successfully"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                }
            }
        },
        "/api/pg/user-project-eligibilities/{user_id}/{project_position_id}": {
            "get": {
                "tags": [
                    "User Project Eligibilities"
                ],
                "summary": "Get a specific user project eligibility",
                "operationId": "49e1b25d11a6640e7432606495e2c47a",
                "parameters": [
                    {
                        "name": "user_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "project_position_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User project eligibility details with relation IDs"
                    }
                }
            },
            "delete": {
                "tags": [
                    "User Project Eligibilities"
                ],
                "summary": "Delete a user project eligibility",
                "operationId": "fdaa0ff2e200304230fdd3f3e8b871fe",
                "parameters": [
                    {
                        "name": "user_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "project_position_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User project eligibility deleted successfully"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "AcademicPeriodPhaseResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 10
                    },
                    "name": {
                        "type": "string",
                        "example": "Proyecto de grado I"
                    },
                    "start_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-01-15"
                    },
                    "end_date": {
                        "type": "string",
                        "format": "date",
                        "example": "2025-06-30"
                    },
                    "deliverables": {
                        "description": "Deliverables are sorted in creation order and include associated files",
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 25
                                },
                                "name": {
                                    "type": "string",
                                    "example": "Entrega de anteproyecto"
                                },
                                "description": {
                                    "type": "string",
                                    "example": "Documento PDF con la propuesta"
                                },
                                "due_date": {
                                    "type": "string",
                                    "format": "date-time",
                                    "example": "2025-02-15T23:59:00"
                                },
                                "files": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer",
                                                "example": 90
                                            },
                                            "name": {
                                                "type": "string",
                                                "example": "propuesta.pdf"
                                            },
                                            "extension": {
                                                "type": "string",
                                                "example": "pdf"
                                            },
                                            "url": {
                                                "type": "string",
                                                "example": "https://storage.test/pg/uploads/2025/propuesta.pdf"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            },
                            "type": "object"
                        }
                    }
                },
                "type": "object"
            },
            "AcademicPeriodDeliverableInput": {
                "required": [
                    "name"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Entrega 1"
                    },
                    "description": {
                        "type": "string",
                        "example": "Documento PDF con la propuesta",
                        "nullable": true
                    },
                    "due_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-02-15T23:59:00",
                        "nullable": true
                    },
                    "file_ids": {
                        "description": "Existing file IDs to associate",
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 42
                        },
                        "nullable": true
                    },
                    "files": {
                        "description": "Uploaded files to attach to the deliverable",
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        },
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "DeliverableCreatePayload": {
                "required": [
                    "phase_id",
                    "name"
                ],
                "properties": {
                    "phase_id": {
                        "type": "integer",
                        "example": 1
                    },
                    "name": {
                        "type": "string",
                        "example": "Entrega 1"
                    },
                    "description": {
                        "type": "string",
                        "example": "Documento PDF con la propuesta",
                        "nullable": true
                    },
                    "due_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-03-15T23:59:00",
                        "nullable": true
                    },
                    "file_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 42
                        }
                    },
                    "files": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        }
                    }
                },
                "type": "object"
            },
            "DeliverableBatchPayload": {
                "required": [
                    "deliverables"
                ],
                "properties": {
                    "deliverables": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DeliverableCreatePayload"
                        }
                    }
                },
                "type": "object"
            },
            "DeliverableResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 12
                    },
                    "name": {
                        "type": "string",
                        "example": "Entrega 1"
                    },
                    "description": {
                        "type": "string",
                        "example": "Documento PDF con la propuesta",
                        "nullable": true
                    },
                    "due_date": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-03-15T23:59:00",
                        "nullable": true
                    },
                    "phase": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 5
                            },
                            "name": {
                                "type": "string",
                                "example": "Proyecto de grado I"
                            },
                            "period": {
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 2
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "2025-1"
                                    }
                                },
                                "type": "object",
                                "nullable": true
                            }
                        },
                        "type": "object",
                        "nullable": true
                    },
                    "files": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/DeliverableFileResource"
                        }
                    },
                    "file_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 12
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-01T12:00:00"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2025-01-15T18:30:00"
                    }
                },
                "type": "object"
            },
            "DeliverableFileResource": {
                "properties": {
                    "deliverable_id": {
                        "type": "integer",
                        "example": 27
                    },
                    "file_id": {
                        "type": "integer",
                        "example": 90
                    },
                    "deliverable_name": {
                        "type": "string",
                        "example": "Entrega 1"
                    },
                    "phase_name": {
                        "type": "string",
                        "example": "Proyecto de grado I"
                    },
                    "academic_period_name": {
                        "type": "string",
                        "example": "2025-1"
                    },
                    "file_name": {
                        "type": "string",
                        "example": "propuesta.pdf"
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            },
            "FileDeliverableSummary": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 40
                    },
                    "name": {
                        "type": "string",
                        "example": "Entrega 1"
                    },
                    "phase": {
                        "properties": {
                            "id": {
                                "type": "integer",
                                "example": 5
                            },
                            "name": {
                                "type": "string",
                                "example": "Proyecto de grado I"
                            },
                            "period": {
                                "properties": {
                                    "id": {
                                        "type": "integer",
                                        "example": 3
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "2025-1"
                                    }
                                },
                                "type": "object",
                                "nullable": true
                            }
                        },
                        "type": "object",
                        "nullable": true
                    }
                },
                "type": "object"
            },
            "StoredFileResource": {
                "properties": {
                    "id": {
                        "type": "integer",
                        "example": 90
                    },
                    "name": {
                        "type": "string",
                        "example": "propuesta.pdf"
                    },
                    "extension": {
                        "type": "string",
                        "example": "pdf"
                    },
                    "url": {
                        "type": "string",
                        "example": "https://storage.test/pg/uploads/2025/propuesta.pdf"
                    },
                    "disk": {
                        "type": "string",
                        "example": "public"
                    },
                    "path": {
                        "type": "string",
                        "example": "pg/uploads/2025/01/15/propuesta.pdf"
                    },
                    "deliverables": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FileDeliverableSummary"
                        }
                    },
                    "deliverable_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 40
                        }
                    },
                    "submissions": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 12
                                }
                            },
                            "type": "object"
                        }
                    },
                    "submission_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 12
                        }
                    },
                    "repository_projects": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 3
                                },
                                "title": {
                                    "type": "string",
                                    "example": "Sistema de seguimiento"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "repository_project_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 3
                        }
                    },
                    "repository_proposals": {
                        "type": "array",
                        "items": {
                            "properties": {
                                "id": {
                                    "type": "integer",
                                    "example": 8
                                },
                                "title": {
                                    "type": "string",
                                    "example": "Plataforma de aprendizaje"
                                }
                            },
                            "type": "object"
                        }
                    },
                    "repository_proposal_ids": {
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "example": 8
                        }
                    },
                    "created_at": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "updated_at": {
                        "type": "string",
                        "format": "date-time"
                    }
                },
                "type": "object"
            }
        }
    },
    "tags": [
        {
            "name": "Academic Periods",
            "description": "API endpoints for managing academic periods"
        },
        {
            "name": "Deliverables",
            "description": "API endpoints for managing deliverables (supports batch creation)"
        },
        {
            "name": "Deliverable Files",
            "description": "API endpoints for managing deliverable-file associations"
        },
        {
            "name": "Files",
            "description": "API endpoints for managing files"
        },
        {
            "name": "Phases",
            "description": "API endpoints for managing phases (read-only, phases are auto-created with academic periods)"
        },
        {
            "name": "Project Positions",
            "description": "API endpoints for managing project positions"
        },
        {
            "name": "Users",
            "description": "API endpoints for managing users and their project position eligibilities"
        },
        {
            "name": "User Project Eligibilities",
            "description": "API endpoints for managing user project position eligibilities"
        }
    ]
}